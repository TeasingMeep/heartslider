/*❤ HeartSlider v3.4.7 ❤ */"use strict";class HeartSlider{constructor(userSettings){this.reset(userSettings)}reset(userSettings){var _Mathfloor=Math.floor,_this=this;for(var prop in _this.settings={buttons:!1,clickToAdvance:!1,delay:1e3,effect:"fadeOut",loop:!0,manualTransition:400,paused:!1,pauseOnInactiveWindow:!1,progressive:!0,randomize:!1,slideshow:".heart-slideshow",slides:".heart-slide",swipe:!0,transition:3e3,progressIndicators:{enable:!1,type:"dash",clickable:!0,color:"#fff"}},userSettings)if(this.settings.hasOwnProperty(prop))if("object"==typeof userSettings[prop]&&"slideshow"!==prop)for(const subProp in userSettings[prop].enable=!0,userSettings[prop]){const value=userSettings[prop][subProp];this.settings[prop].hasOwnProperty(subProp)&&(this.settings[prop][subProp]=value)}else this.settings[prop]=userSettings[prop];if(this.slideshowSelector="object"==typeof _this.settings.slideshow?_this.settings.slideshow:document.querySelector(_this.settings.slideshow),!this.slideshowSelector)return!1;if(this.slideshowSelector.classList.contains("first-image-loaded"))return console.warn("HeartSlider will not re-init if the first-image-loaded class is already present."),this.destroy(),!1;if(this.slideshowSelector.classList.contains("heart-slideshow")||this.slideshowSelector.classList.add("heart-slideshow"),this.slides=Array.prototype.slice.apply(this.slideshowSelector.querySelectorAll(this.settings.slides)),0===this.slides.length){const directChildren=this.slideshowSelector.children;this.slides=[...directChildren].filter(child=>"BUTTON"!==child.tagName)}if(this.total=this.slides.length,this.index=0,this.manualTimeout,this.originallyPaused=this.settings.paused,this.settings.randomize&&(this.index=_Mathfloor(Math.random()*this.total)),this.settings.progressive&&this.progressiveLoad(this.index,!0,this),"fadeInOut"===this.settings.effect&&this.slideshowSelector.classList.add("fade-in-out"),this.firstIndex=this.index,this.slides.forEach(function(slide,index){index!==_this.firstIndex&&(slide.setAttribute("aria-hidden","true"),slide.setAttribute("tab-index","-1")),slide.classList.contains("heart-slide")||slide.classList.add("heart-slide"),_this.settings.swipe&&slide.setAttribute("draggable","true")}),this.goToSlide(this.firstIndex,!1,!0),2>this.slides.length)return!1;if(_this.settings.progressive||(_this.kickstartProgressiveTimer=setTimeout(()=>{_this.slideshowSelector.classList.add("progressive-loading-disabled"),_this.kickstart()},100)),this.initVis=function(){return _this.heartVisibilityHandler(_this)},_this.settings.pauseOnInactiveWindow&&document.addEventListener("visibilitychange",this.initVis,!0),_this.settings.swipe&&(_this.slideshowSelector.addEventListener("touchstart",_this.swipeHandler(_this).handleTouchStart,{passive:!0}),_this.slideshowSelector.addEventListener("touchmove",_this.swipeHandler(_this).handleTouchMove,{passive:!0})),_this.settings.clickToAdvance){var throttleClick;_this.slideshowSelector.addEventListener("click",function(event){throttleClick||"BUTTON"===event.target.nodeName||(_this.pause(),_this.next(_this,!0,!1,!0),throttleClick=setTimeout(()=>{throttleClick=void 0},_this.settings.manualTransition),!_this.originallyPaused&&(_this.throttleClickResume&&clearTimeout(_this.throttleClickResume),_this.throttleClickResume=setTimeout(()=>{_this.resume()},_this.settings.transition+1.25*_this.settings.delay)))},!1)}if(this.settings.progressIndicators&&this.settings.progressIndicators.enable){const progressContainer=this.slideshowSelector.querySelector(".progress-container")?this.slideshowSelector.querySelector(".progress-container"):document.createElement("div");progressContainer.classList.add("progress-container");const type=this.settings.progressIndicators.type||"dash";progressContainer.classList.add("type-"+type);const indicatorColor=this.settings.progressIndicators.color||"#fff";("#fff"!==indicatorColor||"#ffffff"!==indicatorColor||"white"!==indicatorColor||"rgb(255, 255, 255)"!==indicatorColor||"rgba(255, 255, 255, 1)"!==indicatorColor)&&progressContainer.style.setProperty("--indicator-color",indicatorColor);const indicatorType=this.settings.progressIndicators.clickable?"button":"div";progressContainer.style.setProperty("--total",this.total),0<progressContainer.childElementCount&&(progressContainer.innerHTML="");for(let index=0;index<this.total;index++){const indicator=document.createElement(indicatorType);indicator.classList.add("indicator"),indicator.setAttribute("data-index",index),indicator.addEventListener("click",()=>{if(index===this.index)return;_this.pause();_this.goToSlide(index,!0,!1,!0),throttleClick=setTimeout(()=>{throttleClick=void 0},_this.settings.manualTransition),_this.originallyPaused||(_this.throttleClickResume&&clearTimeout(_this.throttleClickResume),_this.throttleClickResume=setTimeout(()=>{_this.resume()},_this.settings.transition+1*_this.settings.delay))}),progressContainer.appendChild(indicator)}this.slideshowSelector.appendChild(progressContainer),this.progressContainerSelector=progressContainer,this.progressIndicators=progressContainer.querySelectorAll(".indicator"),window.requestAnimationFrame(()=>{this.progressIndicators[this.firstIndex].classList.add("active","first")})}const slideshowButtons=_this.slideshowSelector.querySelectorAll("button[class*='heart-']");if(_this.settings.buttons||2===slideshowButtons.length){function buttonHandler(button){throttleClick||(_this.pause(),button.classList.contains("heart-next")?_this.next(_this,!0,!1,!0):button.classList.contains("heart-prev")&&_this.previous(_this,!0,!1,!0),throttleClick=setTimeout(()=>{throttleClick=void 0},200))}if(0===slideshowButtons.length){const buttonClasses=["heart-prev","heart-next"];for(var button,i=0;i<buttonClasses.length;i++)button=document.createElement("button"),button.classList.add(buttonClasses[i]),button.setAttribute("aria-label",buttonClasses[i].replace("heart-","")),button.setAttribute("tab-index","0"),button.addEventListener("click",function(e){buttonHandler(e.currentTarget)},!1),_this.slideshowSelector.appendChild(button)}else for(const button of slideshowButtons){button.setAttribute("tab-index","0");const ariaLabel=button.classList.contains("heart-prev")?"prev":"next";button.setAttribute("aria-label",ariaLabel),button.addEventListener("click",function(e){buttonHandler(e.currentTarget)},!1)}}}kickstart(){const _this=this;if(_this.settings.progressive){_this.slideshowSelector.classList.add("first-image-loaded");var startProgressiveLoad=function(){_this.firstImageLoad&&_this.firstImageLoad(_this),_this.kickstartProgressiveLoadTimer=setTimeout(()=>{_this.progressiveLoad((_this.firstIndex+1+_this.total)%_this.total)},_this.settings.delay)};window.requestAnimationFrame(startProgressiveLoad)}_this.settings.paused||(_this.kickoffTimer=setTimeout(()=>{_this.resume(),_this.kickoffTimer=void 0},.5*_this.settings.delay+_this.settings.transition))}on(type,callback){const _this=this,supportedEvents=["transitionStart","transitionEnd","firstImageLoad"];if(!supportedEvents.includes(type))console.warn("\""+type+"\" is not a valid event. Try one of these:",supportedEvents);else if("function"==typeof callback){function callbackHandler(_this){let event=new CustomEvent(type,{detail:{slideshow:_this}});_this.slideshowSelector.dispatchEvent(event),callback(event.detail.slideshow,event.detail.slideshow.slideshowSelector,event.detail.slideshow.currentSlide)}"transitionStart"===type&&(_this.transitionStart=function(_this){callbackHandler(_this)}),"transitionEnd"===type&&(_this.transitionEnd=function(_this){callbackHandler(_this)}),"firstImageLoad"===type&&(_this.firstImageLoad=function(_this){callbackHandler(_this)})}else console.warn("Your second argument for "+type+" must be a function.")}swipeHandler(_this){function getTouches(evt){return evt.touches||evt.originalEvent.touches}function handleTouchStart(evt){const firstTouch=getTouches(evt)[0];this.xDown=firstTouch.clientX,this.yDown=firstTouch.clientY}function handleTouchMove(evt){var _Mathabs=Math.abs;if(this.xDown&&this.yDown){var xUp=evt.touches[0].clientX,yUp=evt.touches[0].clientY,xDiff=this.xDown-xUp,yDiff=this.yDown-yUp;_Mathabs(xDiff)>_Mathabs(yDiff)&&(0<xDiff?(evt.preventDefault(),_this.pause(),_this.next(_this,!0,!1,!0)):(evt.preventDefault(),_this.pause(),_this.previous(_this,!0,!1,!0))),this.xDown=null,this.yDown=null}}return this.xDown=null,this.yDown=null,{getTouches:getTouches,handleTouchStart:handleTouchStart,handleTouchMove:handleTouchMove}}heartVisibilityHandler(_this){void 0===_this&&(_this=this);let targetSlide=_this.currentSlide,prevSlide=_this.previousSlide;if(_this.currentSlideProgress=_this.currentSlideProgress||0,null!==_this&&_this.settings.pauseOnInactiveWindow&&null!==_this.settings.slideshow)if("hidden"==document.visibilityState){console.log("%cWindow Lost Focus. HeartSlider is Paused.","font-style: italic; font-size: 0.9em; color: #757575; padding: 0.2em;"),_this.pause();let currentSlideOpacity=window.getComputedStyle(targetSlide).opacity;_this.currentSlideProgress=1-currentSlideOpacity,0<_this.currentSlideProgress&&(targetSlide.style.opacity=_this.currentSlideProgress,prevSlide.style.opacity=1)}else if(console.log("%cRegained Focus. Resumed HeartSlider.","font-style: italic; font-size: 0.9em; color: #6F9F67; padding: 0.2em;"),0<_this.currentSlideProgress&&(targetSlide.style.transitionDuration=_this.settings.transition*_this.currentSlideProgress+"ms",targetSlide.style.transitionTimingFunction="ease-out"),targetSlide.style.opacity="",prevSlide.style.opacity="",!_this.originallyPaused){_this.visResumeTimer&&clearTimeout(_this.visResumeTimer);const timeToResume=_this.settings.transition*_this.currentSlideProgress+_this.settings.delay;_this.visResumeTimer=setTimeout(()=>{targetSlide.style.transitionDuration="0ms",targetSlide.style.transitionTimingFunction="",_this.resume()},timeToResume)}}goToSlide(targetIndex,isManuallyCalled,isFirstSlide,skipDefaultTransition){if(void 0===isManuallyCalled&&(isManuallyCalled=!1),void 0===isFirstSlide&&(isFirstSlide=!1),void 0===skipDefaultTransition&&(skipDefaultTransition=!1),"number"!=typeof targetIndex&&(targetIndex=+targetIndex),this.transitioning&&!skipDefaultTransition)return!1;if(!this.settings.loop&&!isFirstSlide&&targetIndex===this.firstIndex)return this.pause(),!1;this.transitioning=!0,this.slides[targetIndex]&&this.slides[targetIndex].querySelector("video")&&this.clearAllTimers();var _this=this;this.previousSlide=this.slides[this.index];var newTargetIndex=(targetIndex+this.total)%this.total;this.currentSlide=this.slides[newTargetIndex];const progressContainerSelector=this.progressContainerSelector,progressIndicators=this.progressIndicators;if(void 0!==progressContainerSelector&&0<progressIndicators.length){const activeIndicator=progressIndicators[newTargetIndex],alreadyActiveIndicators=progressContainerSelector.querySelectorAll(".active");for(const activeIndicator of alreadyActiveIndicators)activeIndicator.classList.remove("active","first");activeIndicator.classList.add("active")}var duration=isManuallyCalled||isFirstSlide||skipDefaultTransition?_this.settings.manualTransition:_this.settings.transition;this.index=newTargetIndex,isFirstSlide||this.progressiveLoad(newTargetIndex),this.progressiveLoad((newTargetIndex+1+_this.total)%_this.total),window.requestAnimationFrame(function changeSlides(){let prevSlideProgress=1;const prevSlide=_this.previousSlide;if(prevSlide===_this.currentSlide&&skipDefaultTransition){clearTimeout(_this.manualTimeout),clearInterval(_this.slideInterval);const prevSlideOpacity=window.getComputedStyle(prevSlide).opacity;prevSlideProgress=1-prevSlideOpacity,prevSlide.style.opacity=prevSlideOpacity,prevSlide.style.transition="none",window.requestAnimationFrame(()=>{prevSlide.style.transition="opacity",prevSlide.style.transitionDelay="0ms",prevSlide.style.transitionDuration=duration*prevSlideProgress+"ms",prevSlide.style.opacity=""})}else prevSlide!==_this.currentSlide&&("fadeInOut"===_this.settings.effect?(prevSlide.style.transitionDelay="0ms",prevSlide.style.transitionDuration=duration/2+"ms"):(prevSlide.style.transitionDelay=duration+"ms",prevSlide.style.transitionDuration="0ms"),prevSlide.classList.remove("active"));const videoElement=_this.currentSlide.querySelector("video");if(null!==videoElement){function adjustSlideTime(videoElement){var _Mathmax=Math.max;const totalDuration=_this.settings.delay+2*_this.settings.transition,videoSlideDuration=_Mathmax(1e3*videoElement.duration-totalDuration,0);0<=videoSlideDuration&&(_this.pause(),_this.videoSlideTimer&&clearTimeout(_this.videoSlideTimer),_this.videoSlideTimer=setTimeout(()=>{_this.originallyPaused?_this.next():_this.resume()},videoSlideDuration+_this.settings.transition))}videoElement.currentTime=0,videoElement.play(),videoElement.duration&&"number"==typeof videoElement.duration?adjustSlideTime(videoElement):videoElement.onloadedmetadata=function(){adjustSlideTime(videoElement)}}"fadeInOut"===_this.settings.effect?(_this.currentSlide.style.transitionDelay=duration/3+"ms",_this.currentSlide.style.transitionDuration=duration/2+"ms"):(_this.currentSlide.style.transitionDelay="0ms",_this.currentSlide.style.transitionDuration=duration+"ms"),_this.currentSlide.removeAttribute("aria-hidden"),_this.currentSlide.removeAttribute("tab-index"),_this.currentSlide.classList.add("active"),_this.transitionEndTimer&&clearTimeout(_this.transitionEndTimer),_this.transitionStart&&_this.transitionStart(_this),_this.transitionEndTimer=setTimeout(()=>{if(prevSlide.style.transitionDelay="0ms",prevSlide.style.transitionDuration="0ms",!isFirstSlide){prevSlide.setAttribute("aria-hidden","true"),prevSlide.setAttribute("tab-index","-1"),_this.transitionEnd&&_this.transitionEnd(_this);const videoElement=prevSlide.querySelector("video");null!==videoElement&&(videoElement.pause(),videoElement.currentTime=0)}_this.transitioning=!1,_this.transitionEndTimer=void 0},duration*prevSlideProgress)})}progressiveLoad(target,isFirstSlide,_this){void 0===isFirstSlide&&(isFirstSlide=!1),void 0===_this&&(_this=this);const targetSlide=this.slides[target];if(null!==targetSlide){var currentImages=Array.prototype.slice.call(targetSlide.querySelectorAll("img"));if(!!currentImages&&0<currentImages.length){function loadHandler(currentImage,index){currentImage.classList.add("heart-loaded"),currentImage.classList.remove("heart-loading"),isFirstSlide&&0==index&&_this.kickstart()}currentImages.forEach((currentImage,index)=>{if(!(null==currentImage||currentImage.classList.contains("heart-loaded")||currentImage.classList.contains("heart-loading")||null===currentImage.currentSrc))if(currentImage.classList.add("heart-loading"),currentImage.complete&&0<currentImage.naturalWidth)loadHandler(currentImage,index);else{currentImage.onload=loadHandler(currentImage,index);var atts=["sizes","srcset","src"];atts.forEach(function(attribute){var targetAtt=currentImage.getAttribute("data-"+attribute);targetAtt&&null==currentImage.getAttribute(attribute)&&(currentImage.setAttribute(attribute,targetAtt),currentImage.setAttribute("data-"+attribute,""))})}})}var currentVideos=Array.prototype.slice.call(targetSlide.querySelectorAll("video"));currentVideos&&0<currentVideos.length&&currentVideos.forEach((currentVideo,index)=>{if(null==currentVideo||currentVideo.classList.contains("heart-loaded")||currentVideo.classList.contains("heart-loading"))return;else{function loadHandler(){if(currentVideo.classList.add("heart-loaded"),currentVideo.classList.remove("heart-loading"),isFirstSlide&&0==index&&_this.kickstart(),!1===_this.settings.randomize||"all"!==_this.settings.randomize){const allVideos=Array.from(_this.slideshowSelector.querySelectorAll("video")),currentIndex=allVideos.indexOf(currentVideo);if(currentIndex===allVideos.length-1)return null;const nextVideoSlide=allVideos[currentIndex+1].closest(".heart-slide");if(null!==nextVideoSlide){const nextVideoSlideIndex=Array.from(_this.slides).indexOf(nextVideoSlide);_this.progressiveLoad(nextVideoSlideIndex)}}}currentVideo.muted="muted",currentVideo.removeAttribute("loop");const mustHaveAttributes=["playsinline","disablepictureinpicture","disableremoteplayback","preload"];if(mustHaveAttributes.forEach(attr=>{if(!currentVideo.getAttribute(attr)){let value="";"preload"===attr&&(value="auto"),currentVideo.setAttribute(attr,value)}}),currentVideo.onloadstart=()=>{currentVideo.classList.add("heart-loading")},currentVideo.oncanplaythrough=loadHandler.bind(currentVideo),""==currentVideo.src&&null!==currentVideo.getAttribute("data-src")&&(currentVideo.src=currentVideo.getAttribute("data-src"),currentVideo.removeAttribute("data-src")),0<currentVideo.querySelectorAll("source").length){const sources=currentVideo.querySelectorAll("source");let errorCount=0;for(const source of sources)""==source.src&&null!==source.getAttribute("data-src")&&(source.src=source.getAttribute("data-src"),source.removeAttribute("data-src")),source.onerror=()=>{errorCount++,this.removeEmptySlideAndReinit(target,errorCount,sources.length)}}currentVideo.load()}})}}removeEmptySlideAndReinit(target,errorCount,totalNumberOfSources){const currentSlide=this.slides[target];errorCount===totalNumberOfSources&&(this.slideshowSelector.removeChild(currentSlide),console.warn("removed slide based on error loading source:",currentSlide),this.reset(this.settings),0===target&&(this.slideshowSelector.classList.add("first-image-loaded"),_this.firstImageLoad&&_this.firstImageLoad(_this)))}prevNextHandler(targetIndex,indexToProgressiveLoad,isManuallyCalled){const _this=this;if(!0===_this.transitioning){if(!0===isManuallyCalled){_this.manualTimeout&&clearTimeout(_this.manualTimeout),_this.originallyPaused||(_this.manualTimeout=setTimeout(_this.resume(),_this.settings.transition+_this.settings.delay)),_this.progressiveLoad(indexToProgressiveLoad);var skipDefaultTransition=!0;let isFirstSlide=!1;return void _this.goToSlide(_this.index,isManuallyCalled,!1,!0)}return}!0===isManuallyCalled&&_this.progressiveLoad(indexToProgressiveLoad),_this.goToSlide(targetIndex,isManuallyCalled,!1,skipDefaultTransition),setTimeout(function(){_this.transitioning=!1},isManuallyCalled?_this.settings.manualTransition:_this.settings.transition)}clearAllTimers(){clearInterval(this.slideInterval),clearTimeout(this.progressiveLoadTimer),clearTimeout(this.kickstartProgressiveTimer),clearTimeout(this.kickstartProgressiveLoadTimer),clearTimeout(this.manualTimeout),clearTimeout(this.kickoffTimer),clearTimeout(this.throttleClickResume),clearTimeout(this.videoSlideTimer),clearTimeout(this.visResumeTimer)}destroy=function(){var _Mathfloor2=Math.floor;this.clearAllTimers(),document.removeEventListener("visibilitychange",this.initVis,!0),this.slides!==void 0&&this.slides.forEach(function(slide,index){slide.classList.remove("active"),slide.removeAttribute("style"),slide.removeAttribute("aria-hidden"),slide.removeAttribute("tab-index"),slide.removeAttribute("draggable");const slideImages=slide.querySelectorAll("img");for(const image of slideImages){var atts=["sizes","srcset","src"];atts.forEach(attribute=>{var targetAtt=image.getAttribute(attribute);null!==targetAtt&&(image.setAttribute("data-"+attribute,image.getAttribute(attribute)),image.removeAttribute(attribute)),image.classList.remove("heart-loaded")})}const slideVideos=slide.querySelectorAll("video");for(const video of slideVideos)null!==video&&(video.classList.remove("heart-loaded"),video.pause())});const buttons=this.slideshowSelector.querySelectorAll("button[class*='heart-']");if(buttons.length)for(const button of buttons)button.remove();const progressIndicators=this.slideshowSelector.querySelector(".progress-container");null!==progressIndicators&&progressIndicators.remove(),this.slideshowSelector.classList.remove("fade-in-out"),this.slideshowSelector.classList.remove("first-image-loaded");const allProperties=Object.getOwnPropertyNames(this);for(const prop of allProperties)this.hasOwnProperty(prop),delete this[`${prop}`];setTimeout(()=>{const destroySynonyms=["utterly and completely annihilated.","obliterated.","demolished beyond recognition.","reduced to atoms.","wiped out.","devastated.","razed to the ground.","utterly decimated.","torn asunder.","completely wrecked.","destroyed.","FUBAR'd."],randomIndex=_Mathfloor2(Math.random()*destroySynonyms.length);console.warn("%cSuccess! HeartSlider has been "+destroySynonyms[randomIndex],"font-size: 1.2em; font-weight: bold"),setTimeout(()=>{const messages=["What did I ever do to you?","How could you??","I'm disappointed in your actions and expect better from you.","Your behavior was unacceptable, and it's important to address it.","I'm upset by what you did, and I hope we can resolve this issue.","Your actions have consequences, and you need to take responsibility.","I can't condone what you did, and I hope you'll make amends.","What you did was wrong, and it's essential to make it right.","Death. Death at last.","I'm concerned about the intention of your actions.","It's important to acknowledge your mistakes and work on improving.","Was I not good enough?","I'm willing to forgive, but you need to show genuine remorse.","I'm hurt by what you did, and I hope we can rebuild.","I hope you make better choices in the future.","Sheesh... That one felt personal.","I believe in second chances. Please don't let me go.","I'm disappointed in you.","Your actions have consequences.","Ouch!","We all make mistakes.","Let the hate flow through you."],randomIndex=_Mathfloor2(Math.random()*messages.length);console.warn("%c"+messages[randomIndex],"font-size: 1em; font-weight: bold")},1500)},100)};goTo=function(jumpToIndex){console.log(jumpToIndex+1<=this.total),jumpToIndex+1<=this.total?(this.pause(),this.goToSlide(jumpToIndex)):console.warn("Attempting to go to a slide that does not exist.","Slide requested: "+jumpToIndex+" of "+this.total)};next=function(_this,isManuallyCalled){void 0===_this&&(_this=this),void 0===isManuallyCalled&&(isManuallyCalled=!1);var nextIndex=(_this.index+1+_this.total)%_this.total,indexToProgressiveLoad=(nextIndex+1+_this.total)%_this.total;_this.prevNextHandler(nextIndex,indexToProgressiveLoad,isManuallyCalled)};previous=function(_this,isManuallyCalled){void 0===_this&&(_this=this),void 0===isManuallyCalled&&(isManuallyCalled=!1);var previousIndex=(_this.index-1+_this.total)%_this.total,indexToProgressiveLoad=previousIndex;_this.prevNextHandler(previousIndex,indexToProgressiveLoad,isManuallyCalled)};resume=function(_this){void 0===_this&&(_this=this),_this.settings.paused&&(_this.settings.paused=!1);var nextSlideIndex=(_this.index+1+_this.total)%_this.total;_this.settings.progressive&&(_this.progressiveLoadTimer=setTimeout(()=>{_this.progressiveLoad((nextSlideIndex+1+_this.total)%_this.total)},_this.settings.delay)),_this.goToSlide(nextSlideIndex),this.slideInterval=setInterval(function(){_this.next(_this,!1)},_this.settings.delay+_this.settings.transition)};pause=function(_this){void 0===_this&&(_this=this),_this.settings.paused||(_this.settings.paused=!0,this.clearAllTimers())}}
