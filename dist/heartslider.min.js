"use strict";
/* Heartslider â€“ v3.4.0 */
function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}class HeartSlider{constructor(t){_defineProperty(this,"next",function(t=this,e=!1){var i=(t.index+1+t.total)%t.total,s=(i+1+t.total)%t.total;t.prevNextHandler(i,s,e)}),_defineProperty(this,"previous",function(t=this,e=!1){var i=(t.index-1+t.total)%t.total;t.prevNextHandler(i,i,e)}),_defineProperty(this,"resume",function(t=this){t.settings.paused&&(t.settings.paused=!1);var e=(t.index+1+t.total)%t.total;t.settings.progressive&&setTimeout(function(){t.progressiveLoad((e+1+t.total)%t.total)},t.settings.delay),t.goToSlide(e),this.slideInterval=setInterval(function(){t.next(t,!1)},t.settings.delay+t.settings.transition)}),_defineProperty(this,"pause",function(t=this){t.settings.paused||(t.settings.paused=!0,this.clearAllTimers())}),this.reset(t)}reset(t){var e,i,s=this;for(var r in s.settings={buttons:!1,clickToAdvance:!1,delay:1e3,effect:"fadeOut",loop:!0,manualTransition:400,paused:!1,pauseOnInactiveWindow:!1,progressive:!0,randomize:!1,slideshow:".heart-slideshow",slides:".heart-slide",swipe:!0,transition:3e3,progressIndicators:{type:"dash",clickable:!0,color:"#fff"}},t)if(this.settings.hasOwnProperty(r)){if("object"==typeof t[r])for(let n in t[r]){let o=t[r][n];this.settings[r].hasOwnProperty(n)&&(this.settings[r][n]=o)}else this.settings[r]=t[r]}if(this.slideshowSelector="object"==typeof s.settings.slideshow?s.settings.slideshow:document.querySelector(s.settings.slideshow),!this.slideshowSelector)return!1;if(this.slideshowSelector.classList.contains("heart-slideshow")||this.slideshowSelector.classList.add("heart-slideshow"),this.slides=Array.prototype.slice.apply(this.slideshowSelector.querySelectorAll(this.settings.slides)),0===this.slides.length){let l=this.slideshowSelector.children;this.slides=[...l].filter(t=>"BUTTON"!==t.tagName)}if(this.total=this.slides.length,this.index=0,this.manualTimeout,this.originallyPaused=this.settings.paused,this.settings.randomize&&(this.index=Math.floor(Math.random()*this.total)),this.settings.progressive&&this.progressiveLoad(this.index,!0,this),this.firstIndex=this.index,this.slides.forEach(function(t,e){e!==s.firstIndex&&(t.setAttribute("aria-hidden","true"),t.setAttribute("tab-index","-1")),t.classList.contains("heart-slide")||t.classList.add("heart-slide"),s.settings.swipe&&t.setAttribute("draggable","true")}),this.goToSlide(this.firstIndex,!1,!0),this.slides.length<2)return!1;s.settings.progressive||setTimeout(function(){s.slideshowSelector.classList.add("progressive-loading-disabled"),s.kickstart()},100);var a=function t(){return s.heartVisibilityHandler(s)};if(s.settings.pauseOnInactiveWindow&&document.addEventListener("visibilitychange",a,!0),s.settings.swipe&&(s.slideshowSelector.addEventListener("touchstart",s.swipeHandler(s).handleTouchStart,!1),s.slideshowSelector.addEventListener("touchmove",s.swipeHandler(s).handleTouchMove,!1)),s.settings.clickToAdvance&&s.slideshowSelector.addEventListener("click",function(t){e||"BUTTON"===t.target.nodeName||(s.pause(),s.next(s,!0,!1,!0),e=setTimeout(function(){e=void 0},s.settings.manualTransition),s.originallyPaused||(s.throttleClickResume&&clearTimeout(s.throttleClickResume),s.throttleClickResume=setTimeout(function(){s.resume()},s.settings.transition+1.25*s.settings.delay)))},!1),this.settings.progressIndicators){let d=null!==(i=this.slideshowSelector.querySelector(".progress-container"))&&void 0!==i?i:document.createElement("div");d.classList.add("progress-container");let c=this.settings.progressIndicators.type||"dash";d.classList.add("type-"+c);let u=this.settings.progressIndicators.color||"#fff";("#fff"!==u||"#ffffff"!==u||"white"!==u||"rgb(255, 255, 255)"!==u||"rgba(255, 255, 255, 1)"!==u)&&d.style.setProperty("--indicator-color",u);let h=this.settings.progressIndicators.clickable?"button":"div";d.style.setProperty("--total",this.total),d.childElementCount>0&&(d.innerHTML="");for(let f=0;f<this.total;f++){let g=document.createElement(h);g.classList.add("indicator"),g.setAttribute("data-index",f),g.addEventListener("click",t=>{f!==this.index&&(s.pause(),s.goToSlide(f,!0,!1,!0),e=setTimeout(function(){e=void 0},s.settings.manualTransition),s.originallyPaused||(s.throttleClickResume&&clearTimeout(s.throttleClickResume),s.throttleClickResume=setTimeout(function(){s.resume()},s.settings.transition+1*s.settings.delay)))}),d.appendChild(g)}this.slideshowSelector.appendChild(d),this.progressContainerSelector=d,this.progressIndicators=d.querySelectorAll(".indicator"),window.requestAnimationFrame(()=>{this.progressIndicators[this.firstIndex].classList.add("active","first")})}let p=s.slideshowSelector.querySelectorAll("button[class*='heart-']");if(s.settings.buttons||2===p.length){function v(t){e||(s.pause(),t.classList.contains("heart-next")?s.next(s,!0,!1,!0):t.classList.contains("heart-prev")&&s.previous(s,!0,!1,!0),e=setTimeout(function(){e=void 0},200))}if(0===p.length){let m=["heart-prev","heart-next"];for(var y=0;y<m.length;y++){var $=document.createElement("button");$.classList.add(m[y]),$.setAttribute("aria-label",m[y].replace("heart-","")),$.setAttribute("tab-index","0"),$.addEventListener("click",function(t){v(t.currentTarget)},!1),s.slideshowSelector.appendChild($)}}else for(let S of p){S.setAttribute("tab-index","0");let b=S.classList.contains("heart-prev")?"prev":"next";S.setAttribute("aria-label",b),S.addEventListener("click",function(t){v(t.currentTarget)},!1)}}}kickstart(){let t=this;if(t.settings.progressive){t.slideshowSelector.classList.add("first-heart-loaded");var e=function e(){setTimeout(function(){t.progressiveLoad((t.firstIndex+1+t.total)%t.total)},t.settings.delay)};window.requestAnimationFrame(e)}t.settings.paused||(t.kickoffTimer=setTimeout(function(){t.resume(),t.kickoffTimer=void 0},.5*t.settings.delay+t.settings.transition))}on(t,e){let i=this,s=["transitionStart","transitionEnd"];if(s.includes(t)){if("function"==typeof e){function r(i){let s=new CustomEvent(t,{detail:{slideshow:i}});i.slideshowSelector.dispatchEvent(s),e(s.detail.slideshow,s.detail.slideshow.slideshowSelector,s.detail.slideshow.currentSlide)}"transitionStart"===t&&(i.transitionStart=function(t){r(t)}),"transitionEnd"===t&&(i.transitionEnd=function(t){r(t)})}else console.warn("Your second argument for "+t+" must be a function.")}else console.warn('"'+t+'" is not a valid event. Try one of these:',s)}swipeHandler(t){function e(t){return t.touches||t.originalEvent.touches}return this.xDown=null,this.yDown=null,{getTouches:e,handleTouchStart:function t(i){let s=e(i)[0];this.xDown=s.clientX,this.yDown=s.clientY},handleTouchMove:function e(i){if(this.xDown&&this.yDown){var s=i.touches[0].clientX,r=i.touches[0].clientY,n=this.xDown-s;Math.abs(n)>Math.abs(this.yDown-r)&&(n>0?(i.preventDefault(),t.pause(),t.next(t,!0,!1,!0)):(i.preventDefault(),t.pause(),t.previous(t,!0,!1,!0))),this.xDown=null,this.yDown=null}}}}heartVisibilityHandler(t){null!==t&&t.settings.pauseOnInactiveWindow&&null!==document.querySelector(t.settings.slideshow)&&("hidden"==document.visibilityState?(console.log("%cWindow Lost Focus. HeartSlider is Paused.","font-style: italic; font-size: 0.9em; color: #757575; padding: 0.2em;"),t.pause()):(console.log("%cRegained Focus. Resumed HeartSlider.","font-style: italic; font-size: 0.9em; color: #6F9F67; padding: 0.2em;"),t.resume()))}goToSlide(t,e=!1,i=!1,s=!1){if(this.transitioning&&!s)return!1;if(!this.settings.loop&&!i&&t===this.firstIndex)return this.pause(),!1;this.transitioning=!0,this.clearAllTimers();var r=this;this.previousSlide=this.slides[this.index];var n=(t+this.total)%this.total;this.currentSlide=this.slides[n];let o=this.progressContainerSelector,l=this.progressIndicators;if(void 0!==o&&l.length>0){let a=l[n],d=o.querySelectorAll(".active");for(let c of d)c.classList.remove("active","first");a.classList.add("active")}var u=e||i||s?r.settings.manualTransition:r.settings.transition;this.index=n,i||this.progressiveLoad(n),this.progressiveLoad((n+1+r.total)%r.total),window.requestAnimationFrame(function t(){let e=1;if(r.previousSlide===r.currentSlide&&s){clearTimeout(r.manualTimeout),clearInterval(r.slideInterval);let n=window.getComputedStyle(r.previousSlide).opacity;e=1-n,r.previousSlide.style.opacity=n,r.previousSlide.style.transition="none",setTimeout(function(){r.previousSlide.style.transition="opacity",r.previousSlide.style.transitionDelay="0ms",r.previousSlide.style.transitionDuration=u*e+"ms",r.previousSlide.style.opacity=null},16.6667)}else r.previousSlide!==r.currentSlide&&(r.previousSlide.style.transitionDelay=u+"ms",r.previousSlide.style.transitionDuration="0ms",r.previousSlide.classList.remove("active"));let o=r.currentSlide.querySelector("video");if(null!==o){function l(t){let e=r.settings.delay+2*r.settings.transition,i=Math.max(1e3*t.duration-e,0);i>=0&&(r.pause(),r.videoSlideTimer&&clearTimeout(r.videoSlideTimer),r.videoSlideTimer=setTimeout(function(){r.resume()},i+r.settings.transition))}o.currentTime=0,o.play(),o.duration&&"number"==typeof o.duration?l(o):o.onloadedmetadata=function(){l(o)}}r.currentSlide.style.transitionDelay="0ms",r.currentSlide.style.transitionDuration=u+"ms",r.currentSlide.removeAttribute("aria-hidden"),r.currentSlide.removeAttribute("tab-index"),r.currentSlide.classList.add("active"),r.transitionEndTimer&&clearTimeout(r.transitionEndTimer),r.transitionStart&&r.transitionStart(r),r.transitionEndTimer=setTimeout(function(){if(r.previousSlide.style.transitionDelay="0ms",r.previousSlide.style.transitionDuration="0ms",!i){r.previousSlide.setAttribute("aria-hidden","true"),r.previousSlide.setAttribute("tab-index","-1"),r.transitionEnd&&r.transitionEnd(r);let t=r.previousSlide.querySelector("video");null!==t&&(t.pause(),t.currentTime=0)}r.transitioning=!1,r.transitionEndTimer=void 0},u*e)})}progressiveLoad(t,e=!1,i=this){let s=this.slides[t];if(null!==s){var r=Array.prototype.slice.call(s.querySelectorAll("img"));r&&r.length>0&&r.forEach((t,s)=>{!(void 0==t||t.classList.contains("heart-loaded")||t.classList.contains("heart-loading"))&&null!==t.currentSrc&&((t.classList.add("heart-loading"),t.complete&&t.naturalWidth>0)?r.bind(t)():(t.onload=r.bind(t),["sizes","srcset","src"].forEach(function(e){var i=t.getAttribute("data-"+e);i&&null==t.getAttribute(e)&&(t.setAttribute(e,i),t.setAttribute("data-"+e,""))})));function r(){this.classList.add("heart-loaded"),this.classList.remove("heart-loading"),e&&0==s&&i.kickstart()}});var n=Array.prototype.slice.call(s.querySelectorAll("video"));n&&n.length>0&&n.forEach((s,r)=>{if(!(void 0==s||s.classList.contains("heart-loaded")||s.classList.contains("heart-loading"))){if(s.muted="muted",s.removeAttribute("loop"),["playsinline","disablepictureinpicture","disableremoteplayback","preload"].forEach(t=>{if(!s.getAttribute(t)){let e="";"preload"===t&&(e="auto"),s.setAttribute(t,e)}}),s.onloadstart=()=>{s.classList.add("heart-loading")},s.oncanplaythrough=(function n(){if(s.classList.add("heart-loaded"),s.classList.remove("heart-loading"),e&&0==r&&i.kickstart(),console.log("%cFinished loading index: "+t,"font-style: italic; font-size: 0.9em; color: #757575; padding: 0.2em;"),!1==i.settings.randomize||"all"!==i.settings.randomize){let o=Array.from(i.slideshowSelector.querySelectorAll("video")),l=o.indexOf(s);if(l===o.length-1)return null;let a=o[l+1].closest(".heart-slide");if(null!==a){let d=Array.from(i.slides).indexOf(a);i.progressiveLoad(d)}}}).bind(s),""==s.src&&null!==s.getAttribute("data-src")&&(s.src=s.getAttribute("data-src"),s.removeAttribute("data-src")),s.querySelectorAll("source").length>0){let n=s.querySelectorAll("source"),o=0;for(let l of n)""==l.src&&null!==l.getAttribute("data-src")&&(l.src=l.getAttribute("data-src"),l.removeAttribute("data-src")),l.onerror=()=>{o++,this.removeEmptySlideAndReinit(t,o,n.length)}}s.load()}})}}removeEmptySlideAndReinit(t,e,i){let s=this.slides[t];e===i&&(this.slideshowSelector.removeChild(s),console.warn("removed slide based on error loading source:",s),this.reset(this.settings),0===t&&this.slideshowSelector.classList.add("first-heart-loaded"))}prevNextHandler(t,e,i){let s=this;if(!0===s.transitioning){if(!0!==i)return;s.manualTimeout&&clearTimeout(s.manualTimeout),s.originallyPaused||(s.manualTimeout=setTimeout(s.resume(),s.settings.transition+s.settings.delay)),s.progressiveLoad(e);var r=!0;s.goToSlide(s.index,i,!1,r);return}!0===i&&s.progressiveLoad(e),s.goToSlide(t,i,!1,r),setTimeout(function(){s.transitioning=!1},i?s.settings.manualTransition:s.settings.transition)}clearAllTimers(){clearTimeout(this.manualTimeout),clearTimeout(this.kickoffTimer),clearTimeout(this.throttleClickResume),clearTimeout(this.videoSlideTimer),clearInterval(this.slideInterval)}}