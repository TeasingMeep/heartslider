"use strict";
/* Heartslider â€“ v3.2.2 */
function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var HeartSlider=function(){function HeartSlider(userSettings){_classCallCheck(this,HeartSlider);var _this=this;for(var prop in _this.settings={delay:1e3,effect:"fadeOut",loop:!0,paused:!1,pauseOnInactiveWindow:!1,progressive:!0,randomize:!1,slideshow:".heart-slideshow",slides:".heart-slide",swipe:!0,clickToAdvance:!1,transition:3e3},userSettings)this.settings.hasOwnProperty(prop)&&(this.settings[prop]=userSettings[prop]);if(this.slideshowSelector="object"===_typeof(_this.settings.slideshow)?_this.settings.slideshow:document.querySelector(_this.settings.slideshow),!this.slideshowSelector)return!1;this.slideshowSelector.classList.contains("heart-slideshow")||this.slideshowSelector.classList.add("heart-slideshow"),this.slides=Array.prototype.slice.apply(this.slideshowSelector.querySelectorAll(this.settings.slides)),0===this.slides.length&&(this.slides=Array.prototype.slice.apply(this.slideshowSelector.children)),this.slides.forEach((function(slide){slide.setAttribute("aria-hidden","true"),slide.setAttribute("tab-index","-1"),slide.classList.contains("heart-slide")||slide.classList.add("heart-slide"),_this.settings.swipe&&slide.setAttribute("draggable","true")})),this.total=this.slides.length,this.index=0,this.manualTimeout,this.settings.randomize&&(this.index=Math.floor(Math.random()*this.total)),this.settings.progressive&&this.progressiveLoad(this.index,!0,this);var firstIndex=this.index;if(this.goToSlide(firstIndex,!1,!0),this.slides.length<2)return!1;_this.kickstart=function(){if(_this.settings.progressive){_this.slideshowSelector.classList.add("first-image-loaded");var startProgressiveLoad=function startProgressiveLoad(){setTimeout((function(){_this.progressiveLoad((firstIndex+1+_this.total)%_this.total)}),_this.settings.delay)};window.requestAnimationFrame(startProgressiveLoad)}_this.settings.paused||setTimeout((function(){_this.resume()}),.5*_this.settings.delay+_this.settings.transition)},_this.settings.progressive||setTimeout((function(){_this.slideshowSelector.classList.add("progressive-loading-disabled"),_this.kickstart()}),100);var initVis=function initVis(){return _this.heartVisibilityHandler(_this)},throttleClick,throttleClickResume;(_this.settings.pauseOnInactiveWindow&&document.addEventListener("visibilitychange",initVis,!0),_this.settings.swipe&&(_this.slideshowSelector.addEventListener("touchstart",_this.swipeHandler(_this).handleTouchStart,!1),_this.slideshowSelector.addEventListener("touchmove",_this.swipeHandler(_this).handleTouchMove,!1)),_this.settings.clickToAdvance)&&_this.slideshowSelector.addEventListener("click",(function(){throttleClick||(_this.pause(),_this.next(_this,!0,!1,!0),throttleClick=setTimeout((function(){throttleClick=void 0}),400),_this.settings.paused||(throttleClickResume&&clearTimeout(throttleClickResume),throttleClickResume=setTimeout((function(){_this.resume()}),_this.settings.transition+_this.settings.delay)))}),!1);_this.prevNextHandler=function(targetIndex,indexToProgressiveLoad,isManuallyCalled){if(!0!==_this.transitioning)!0===isManuallyCalled&&_this.progressiveLoad(indexToProgressiveLoad),_this.goToSlide(targetIndex,isManuallyCalled,!1,!1),_this.settings.progressive,setTimeout((function(){_this.transitioning=!1}),isManuallyCalled?400:_this.settings.transition);else if(!0===isManuallyCalled){_this.manualTimeout&&clearTimeout(_this.manualTimeout),_this.settings.paused,_this.progressiveLoad(indexToProgressiveLoad);var skipDefaultTransition=!0;return void _this.goToSlide(_this.index,isManuallyCalled,!1,!0)}}}return _createClass(HeartSlider,[{key:"swipeHandler",value:function swipeHandler(_this){function getTouches(evt){return evt.touches||evt.originalEvent.touches}function handleTouchStart(evt){var firstTouch=getTouches(evt)[0];this.xDown=firstTouch.clientX,this.yDown=firstTouch.clientY}function handleTouchMove(evt){if(this.xDown&&this.yDown){var xUp=evt.touches[0].clientX,yUp=evt.touches[0].clientY,xDiff=this.xDown-xUp,yDiff=this.yDown-yUp;Math.abs(xDiff)>Math.abs(yDiff)&&(xDiff>0?(evt.preventDefault(),_this.pause(),_this.next(_this,!0,!1,!0)):(evt.preventDefault(),_this.pause(),_this.previous(_this,!0,!1,!0))),this.xDown=null,this.yDown=null}}return this.xDown=null,this.yDown=null,{getTouches:getTouches,handleTouchStart:handleTouchStart,handleTouchMove:handleTouchMove}}},{key:"heartVisibilityHandler",value:function heartVisibilityHandler(_this){null!==_this&&_this.settings.pauseOnInactiveWindow&&null!==document.querySelector(_this.settings.slideshow)&&("hidden"==document.visibilityState?(console.log("%cWindow Lost Focus. HeartSlider is Paused.","font-style: italic; font-size: 0.9em; color: #757575; padding: 0.2em;"),_this.pause()):(console.log("%cRegained Focus. Resumed HeartSlider.","font-style: italic; font-size: 0.9em; color: #6F9F67; padding: 0.2em;"),_this.resume()))}},{key:"goToSlide",value:function goToSlide(targetIndex){var isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isFirstSlide=arguments.length>2&&void 0!==arguments[2]&&arguments[2],skipDefaultTransition=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.transitioning&&!skipDefaultTransition)return!1;this.transitioning=!0;var _this=this,oldslide=_this.slides[_this.index],newTargetIndex=(targetIndex+_this.total)%_this.total,newslide=_this.slides[newTargetIndex],duration=isManuallyCalled||isFirstSlide||skipDefaultTransition?400:_this.settings.transition;function changeSlides(){oldslide!==newslide&&(oldslide.style.transitionDelay=duration+"ms",oldslide.style.transitionDuration="0ms",oldslide.classList.remove("active")),newslide.style.transitionDelay="0ms",newslide.style.transitionDuration=duration+"ms",newslide.removeAttribute("aria-hidden"),newslide.removeAttribute("tab-index"),newslide.classList.add("active"),setTimeout((function(){oldslide.setAttribute("aria-hidden","true"),oldslide.setAttribute("tab-index","-1"),_this.transitioning=!1}),duration)}oldslide===newslide&&skipDefaultTransition&&(newslide.style.transitionDuration=duration+"ms",newslide.style.transitionDelay="0ms"),_this.index=newTargetIndex,_this.progressiveLoad(newTargetIndex),_this.progressiveLoad((newTargetIndex+1+_this.total)%_this.total),window.requestAnimationFrame(changeSlides)}},{key:"progressiveLoad",value:function progressiveLoad(target){var isFirstSlide=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_this=arguments.length>2?arguments[2]:void 0,currentImages=Array.prototype.slice.call(this.slides[target].querySelectorAll("img"));currentImages.length>0&&currentImages.forEach((function(currentImage,index){var atts;null==currentImage||currentImage.classList.contains("image-loaded")||currentImage.classList.contains("image-loading")||null===currentImage.currentSrc||(currentImage.classList.add("image-loading"),currentImage.addEventListener("load",(function(){this.classList.add("image-loaded"),this.classList.remove("image-loading"),isFirstSlide&&0==index&&_this.kickstart()})),["sizes","srcset","src"].forEach((function(attribute){var targetAtt=currentImage.getAttribute("data-"+attribute);targetAtt&&null==currentImage.getAttribute(attribute)&&(currentImage.setAttribute(attribute,targetAtt),currentImage.setAttribute("data-"+attribute,""))})))}))}},{key:"next",value:function next(_this){var isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],nextIndex=(_this.index+1+_this.total)%_this.total,indexToProgressiveLoad=(nextIndex+1+_this.total)%_this.total;_this.prevNextHandler(nextIndex,indexToProgressiveLoad,isManuallyCalled)}},{key:"previous",value:function previous(){var _this=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],previousIndex=(_this.index-1+_this.total)%_this.total,indexToProgressiveLoad=previousIndex;_this.prevNextHandler(previousIndex,indexToProgressiveLoad,isManuallyCalled)}},{key:"resume",value:function resume(){var _this=this;_this.settings.paused&&(_this.settings.paused=!1);var nextSlideIndex=(_this.index+1+_this.total)%_this.total;_this.settings.progressive&&setTimeout((function(){_this.progressiveLoad((nextSlideIndex+1+_this.total)%_this.total)}),_this.settings.delay),_this.goToSlide(nextSlideIndex),this.slideInterval=setInterval((function(){_this.next(_this,!1)}),_this.settings.delay+_this.settings.transition)}},{key:"pause",value:function pause(){var _this=this;this.settings.paused||(this.settings.paused=!0,clearTimeout(this.manualTimeout),clearInterval(this.slideInterval))}}]),HeartSlider}();